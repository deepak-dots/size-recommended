<div class="size-finder-wrapper">
    <button id="sf-open" class="size-finder-btn">
        <i><img src="{{ 'search-plus.svg' | asset_url }}" alt="Measurement Icon" width="20" height="20"
                class="size-finder-icon" /></i>

        <p><strong>Find My Perfect Size</strong>
            Recommended for Brace & AFO users</p>

    </button>
</div>

<div id="sf-modal" class="sf-modal product-size-finder-popup">

    <div class="sf-modal-content">
        <span id="sf-close" class="sf-close">&times;</span>

        <!-- ================= STEP 1 ================= -->
        <div id="sf-step-1">
            <div class="padd-20 sf-step-inner">
                <div class="title-box">
                    <div class="step-label">STEP 1 OF 4</div>
                    <h2>What would you like to measure?</h2>
                    <p>
                        Select a category to get sizing recommendations tailored for you.
                    </p>
                </div>

                <div class="measure-btn-row">
                    <button id="sf-category-shoes" class="sf-category-btn active">
                        <i><img src="{{ 'shoes_shoe_icon.svg' | asset_url }}" alt="Measurement Icon"
                                class="sf-icon-img" /></i>
                        Shoes</button>
                    <button id="sf-category-clothing" class="sf-category-btn">
                        <i><img src="{{ 'clothes_icon.svg' | asset_url }}" alt="clothes hanger Icon"
                                class="sf-icon-img" /></i>
                        Clothing</button>
                </div>

                <!-- BRAND -->
                <div class="brand-size-box">
                    <label>
                        Brand
                        <select id="sf-brand"></select>
                    </label>

                    <!-- GENDER / SHOE TYPE -->
                    <label style="margin-top:15px">
                        Who is this for?
                        <select id="sf-gender">
                            <option value="">Select Shoe Type</option>
                        </select>
                    </label>

                    <!-- STYLE -->
                    <label style="margin-top:15px">
                        Style
                        <select id="sf-style">
                            <option value="">Select Style</option>
                        </select>
                    </label>
                </div>
                <div class="center-box">
                    <button id="sf-next" class="sf-primary-btn popupBtn">Next Step →</button>
                </div>
            </div>
        </div>

        <!-- ================= STEP 2 ================= -->
        <div id="sf-step-2" style="display:none">
            <div class="product-detail-col">
                <div class="product-col-left">
                    <div class="musturement-guide">

                        <h2>Reference Diagram</h2>
                        <p class="subtitle">Match your measurements to the points shown on the diagram below.</p>

                        <div class="card">
                            <div class="foot-area">
                                <img src="{{ 'dummy_product.png' | asset_url }}" width="384" height="467"
                                    alt="clothes" />
                            </div>
                        </div>

                        <div class="info-box">
                            <div class="info-icon">i</div>
                            <div class="info-text">
                                <strong>String Method Guide:</strong>
                                No measuring tape? Wrap a piece of string around the point, mark it, and measure against
                                a standard ruler.
                            </div>
                        </div>

                        <div class="labels">
                            <div class="label-item">A: FOOT LENGTH</div>
                            <div class="label-item">D: HEEL GIRTH</div>
                            <div class="label-item">E: ANKLE GIRTH</div>
                        </div>

                    </div>
                </div>
                <div class="product-col-right">
                    <div class="title-box">
                        <div class="step-label">
                            STEP 2 OF 4</div>
                        <h2>Manual Measurement</h2>
                    </div>

                    <!-- Dynamic Measurements -->
                    <div id="sf-measurements"></div>
                    <div class="product-btn-row">
                        <button id="sf-back-step-1" class="sf-secondary-btn popupBackBtn">← Back</button>
                        <button id="sf-submit" class="sf-primary-btn popupBtn">Get My Size →</button>
                    </div>
                </div>
            </div>

        </div>

        <!-- ================= STEP 3 ================= -->
        <div id="sf-step-3" style="display:none">
            <div class="padd-20 sf-step-inner success-box-wrapper">
                <div class="success-box">
                    <img src="{{ 'check-badge.svg' | asset_url }}" width="70" height="70" alt="clothes" />

                    <h2>MEASUREMENT COMPLETE</h2>
                    <div id="sf-result" class="sf-result-box">
                        <span class="sf-loading">Calculating size…</span>
                    </div>
                </div>





                <div class="size-report">
                    <p><strong>Want to keep this for later?</strong></p>
                    <p style="font-size:13px; color:#666">
                        Enter your email to receive a detailed fit report for your records.
                    </p>
                    <div class="size-report-inner">
                        <input type="email" id="sf-email" placeholder="Enter your email address">

                        <button id="sf-send-email" class="sf-secondary-btn popupBtn"
                            style="width:100%; margin-top:10px">
                            Send My Size Report
                        </button>
                    </div>
                </div>

                <button id="sf-close-apply" class="sf-primary-btn popupBtn">
                    Close and Apply Size →
                </button>
            </div>
        </div>

        <p id="sf-error" style="color:red"></p>
    </div>
</div>

<link href="{{ 'size-finder.css' | asset_url }}" rel="stylesheet">
<script src="{{ 'size-finder.js' | asset_url }}" defer></script>

{% schema %}
{
"name": "Find My Perfect Size",
"target": "section",
"settings": []
}
{% endschema %}
